
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Change Password</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    .password-toggle {
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <div class="card shadow rounded-4 p-4">
      <h3 class="mb-4 text-center">ğŸ”  Change Password</h3>
      <form id="passwordForm">
        <div class="mb-3">
          <label for="oldPassword" class="form-label">Old Password</label>
          <div class="input-group">
            <input type="password" class="form-control" id="oldPassword" required>
            <span class="input-group-text password-toggle" onclick="togglePasswordVisibility('oldPassword')">ğŸ‘ï¸</span>
          </div>
        </div>

        <div class="mb-3">
          <label for="newPassword" class="form-label">New Password</label>
          <div class="input-group">
            <input type="password" class="form-control" id="newPassword" required>
            <span class="input-group-text password-toggle" onclick="togglePasswordVisibility('newPassword')">ğŸ‘ï¸</span>
          </div>
        </div>

        <div class="mb-3">
          <label for="confirmPassword" class="form-label">Confirm New Password</label>
          <div class="input-group">
            <input type="password" class="form-control" id="confirmPassword" required>
            <span class="input-group-text password-toggle" onclick="togglePasswordVisibility('confirmPassword')">ğŸ‘ï¸</span>
          </div>
        </div>

        <div class="d-grid">
          <button type="submit" class="btn btn-success rounded-pill">ğŸ’¾ Save </button>
        </div>
      </form>

      <div id="messageBox" class="alert text-center mt-4 d-none"></div>

      <div class="mt-4">
        <h5>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø®Ø²Ù†Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­:</h5>
        <p id="storedPasswordDisplay"></p>
      </div>
    </div>
  </div>

  <script>
    // Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø®Ø²Ù†Ø©ØŒ Ø®Ø²Ù†ÙŠÙ‡Ø§ Ø£ÙˆÙ„ Ù…Ø±Ø©
    if (!localStorage.getItem("userPassword")) {
      localStorage.setItem("userPassword", "admin123"); // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    }

    // Ø¹Ø±Ø¶ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø®Ø²Ù†Ø© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
    document.getElementById("storedPasswordDisplay").textContent = "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©: " + localStorage.getItem("userPassword");

    function validatePasswordStrength(password) {
      const lengthValid = password.length >= 8;
      const hasUpperCase = /[A-Z]/.test(password);
      const hasNumber = /\d/.test(password);
      return lengthValid && hasUpperCase && hasNumber;
    }

    function togglePasswordVisibility(inputId) {
      const inputField = document.getElementById(inputId);
      const inputType = inputField.type;
      inputField.type = inputType === 'password' ? 'text' : 'password';
    }

    document.getElementById("passwordForm").addEventListener("submit", function(event) {
      event.preventDefault();

      const oldPassword = document.getElementById("oldPassword").value;
      const newPassword = document.getElementById("newPassword").value;
      const confirmPassword = document.getElementById("confirmPassword").value;
      const storedPassword = localStorage.getItem("userPassword"); // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø®Ø²Ù†Ø©

      const messageBox = document.getElementById("messageBox");
      messageBox.classList.remove("d-none", "alert-success", "alert-danger");

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
      if (oldPassword !== storedPassword) {
        messageBox.textContent = "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
        messageBox.classList.add("alert-danger");
        return;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø§Ø¨Ù‚ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ ØªØ£ÙƒÙŠØ¯Ù‡Ø§
      if (newPassword !== confirmPassword) {
        messageBox.textContent = "âŒ ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…Ø·Ø§Ø¨Ù‚";
        messageBox.classList.add("alert-danger");
        return;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
      if (newPassword === oldPassword) {
        messageBox.textContent = "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©";
        messageBox.classList.add("alert-danger");
        return;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
      if (!validatePasswordStrength(newPassword)) {
        messageBox.textContent = "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 8 Ø­Ø±ÙˆÙØŒ ÙˆØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø­Ø±Ù ÙƒØ¨ÙŠØ± ÙˆØ±Ù‚Ù…";
        messageBox.classList.add("alert-danger");
        return;
      }

      // Ø­ÙØ¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      localStorage.setItem("userPassword", newPassword);

      messageBox.textContent = "âœ… ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©...";
      messageBox.classList.add("alert-success");

      setTimeout(() => {
        window.location.href = "index.html";
      }, 2500);
    });
  </script>
</body>
</html>
